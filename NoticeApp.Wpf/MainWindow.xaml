<Window x:Class="NoticeApp.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        mc:Ignorable="d"
        Title="沙漏时钟提醒"
        Icon="Assets/app.ico"
        Width="1080"
        Height="700"
        MinWidth="940"
        MinHeight="620"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="NoResize"
        Background="Transparent"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True">
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="0"
                            CornerRadius="6"
                            GlassFrameThickness="0"
                            ResizeBorderThickness="6"
                            UseAeroCaptionButtons="False" />
    </shell:WindowChrome.WindowChrome>

    <Window.Resources>
        <Style x:Key="SwitchCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="Width" Value="44" />
            <Setter Property="Height" Value="24" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                            <Border x:Name="Track" Background="#CDD2DB" CornerRadius="12" />
                            <Ellipse x:Name="Thumb"
                                     Width="18"
                                     Height="18"
                                     Margin="3"
                                     HorizontalAlignment="Left"
                                     Fill="White">
                                <Ellipse.Effect>
                                    <DropShadowEffect BlurRadius="4" ShadowDepth="1" Color="#33000000" />
                                </Ellipse.Effect>
                            </Ellipse>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Track" Property="Background" Value="#0066DE" />
                                <Setter TargetName="Thumb" Property="HorizontalAlignment" Value="Right" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CardActionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="8,0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="#666666" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CardDeleteButtonStyle" TargetType="Button" BasedOn="{StaticResource CardActionButtonStyle}">
            <Setter Property="Foreground" Value="#FF4D4F" />
        </Style>

        <Style x:Key="TitleBarButtonStyle" TargetType="Button" BasedOn="{StaticResource SecondaryButtonStyle}">
            <Setter Property="Width" Value="28" />
            <Setter Property="Height" Value="28" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="FontSize" Value="14" />
        </Style>
    </Window.Resources>

    <Grid Margin="0" Background="Transparent" SnapsToDevicePixels="True" UseLayoutRounding="True">
        <Border Margin="0"
                Padding="2"
                Background="{StaticResource BackgroundBrush}"
                BorderBrush="#CDD5E4"
                BorderThickness="1"
                CornerRadius="6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0"
                        Background="#FAFAFA"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="0,0,1,0">
                    <Grid Margin="0,20,0,20">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal" Margin="22,0,22,22">
                            <Image Width="22"
                                   Height="22"
                                   VerticalAlignment="Center"
                                   Stretch="Uniform"
                                   SnapsToDevicePixels="True"
                                   RenderOptions.BitmapScalingMode="HighQuality"
                                   Source="Assets/icon-bell.png" />
                            <TextBlock Margin="10,0,0,0"
                                       VerticalAlignment="Center"
                                       FontSize="18"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource PrimaryTextBrush}"
                                       Text="沙漏时钟提醒" />
                        </StackPanel>

                        <StackPanel Grid.Row="1" Margin="0,8,0,0">
                            <Button x:Name="ReminderNavButton"
                                    Margin="10,0,10,8"
                                    Height="42"
                                    HorizontalContentAlignment="Left"
                                    Padding="14,0"
                                    Background="#E6F0FF"
                                    BorderBrush="#0066DE"
                                    BorderThickness="0,0,3,0"
                                    Foreground="#0066DE"
                                    FontSize="14"
                                    Content="我的提醒"
                                    Click="ReminderNavButton_Click" />
                            <Button x:Name="SettingsNavButton"
                                    Margin="10,0,10,0"
                                    Height="42"
                                    HorizontalContentAlignment="Left"
                                    Padding="14,0"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    BorderThickness="0"
                                    Foreground="{StaticResource SecondaryTextBrush}"
                                    FontSize="14"
                                    Content="系统设置"
                                    Click="SettingsNavButton_Click" />
                        </StackPanel>
                    </Grid>
                </Border>

                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="50" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0"
                            Background="{StaticResource SurfaceBrush}"
                            BorderBrush="{StaticResource BorderBrush}"
                            BorderThickness="0,0,0,1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0"
                                    Background="Transparent"
                                    shell:WindowChrome.IsHitTestVisibleInChrome="True"
                                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown" />

                            <StackPanel Grid.Column="1"
                                        Orientation="Horizontal"
                                        VerticalAlignment="Center"
                                        Margin="0,0,8,0"
                                        shell:WindowChrome.IsHitTestVisibleInChrome="True">
                                <Button Style="{StaticResource TitleBarButtonStyle}"
                                        Margin="0,0,6,0"
                                        Content="-"
                                        shell:WindowChrome.IsHitTestVisibleInChrome="True"
                                        Click="MinimizeButton_Click" />
                                <Button Style="{StaticResource TitleBarButtonStyle}"
                                        Content="X"
                                        shell:WindowChrome.IsHitTestVisibleInChrome="True"
                                        Click="CloseButton_Click" />
                            </StackPanel>
                        </Grid>
                    </Border>

                    <Grid Grid.Row="1">
                        <Grid x:Name="HomePageGrid" Margin="24,20,24,20">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="0" Margin="0,0,0,18">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="我的提醒"
                                               FontSize="24"
                                               FontWeight="SemiBold"
                                               Foreground="{StaticResource PrimaryTextBrush}" />
                                    <TextBlock x:Name="StatsTextBlock"
                                               Margin="0,6,0,0"
                                               FontSize="12"
                                               Foreground="{StaticResource SecondaryTextBrush}" />
                                </StackPanel>
                                <Button Grid.Column="1"
                                        Width="132"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource PrimaryButtonStyle}"
                                        Content="添加提醒"
                                        Click="AddButton_Click" />
                            </Grid>

                            <TextBlock x:Name="EmptyStateTextBlock"
                                       Grid.Row="1"
                                       Margin="0,8,0,0"
                                       FontSize="14"
                                       Foreground="{StaticResource SecondaryTextBrush}"
                                       Text="暂无提醒，点击右上角添加提醒"
                                       Visibility="Collapsed" />

                            <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                                <ItemsControl x:Name="ReminderCardItemsControl">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Margin="0,0,0,14"
                                                    Padding="22,18"
                                                    Background="White"
                                                    BorderBrush="#E5E7EB"
                                                    BorderThickness="1"
                                                    CornerRadius="12">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel Orientation="Horizontal">
                                                        <CheckBox Style="{StaticResource SwitchCheckBoxStyle}"
                                                                  IsChecked="{Binding IsEnabled, Mode=OneWay}"
                                                                  Tag="{Binding Id}"
                                                                  Checked="CardEnableCheckBox_Checked"
                                                                  Unchecked="CardEnableCheckBox_Unchecked" />
                                                        <StackPanel Margin="18,0,0,0">
                                                            <TextBlock Text="{Binding Description}"
                                                                       FontSize="16"
                                                                       FontWeight="SemiBold"
                                                                       Foreground="{StaticResource PrimaryTextBrush}" />
                                                            <TextBlock Margin="0,6,0,0"
                                                                       Text="{Binding MetaText}"
                                                                       FontSize="13"
                                                                       Foreground="{StaticResource SecondaryTextBrush}" />
                                                        </StackPanel>
                                                    </StackPanel>

                                                    <StackPanel Grid.Column="1"
                                                                Orientation="Horizontal"
                                                                VerticalAlignment="Center"
                                                                Margin="18,0,0,0">
                                                        <Button Content="编辑"
                                                                Margin="0,0,14,0"
                                                                Tag="{Binding Id}"
                                                                Style="{StaticResource CardActionButtonStyle}"
                                                                Click="CardEditButton_Click" />
                                                        <Button Content="删除"
                                                                Tag="{Binding Id}"
                                                                Style="{StaticResource CardDeleteButtonStyle}"
                                                                Click="CardDeleteButton_Click" />
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </Grid>

                        <ScrollViewer x:Name="SettingsPageGrid"
                                      Visibility="Collapsed"
                                      VerticalScrollBarVisibility="Auto"
                                      Margin="20,16,20,18">
                            <StackPanel>
                                <TextBlock Text="系统设置"
                                           FontSize="28"
                                           FontWeight="Bold"
                                           Foreground="{StaticResource PrimaryTextBrush}" />
                                <Border Margin="0,8,0,14"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="0,0,0,1"
                                        Padding="0,0,0,10">
                                    <TextBlock Text="在此配置应用程序行为"
                                               FontSize="12"
                                               Foreground="{StaticResource SecondaryTextBrush}" />
                                </Border>

                                <Border CornerRadius="8"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="1"
                                        Background="White"
                                        Padding="18"
                                        Margin="0,0,0,14">
                                    <StackPanel>
                                        <Grid Margin="0,0,0,14">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <StackPanel>
                                                <TextBlock Text="开机自启动"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{StaticResource PrimaryTextBrush}" />
                                                <TextBlock Text="Windows 启动时自动运行沙漏时钟提醒"
                                                           FontSize="12"
                                                           Margin="0,4,0,0"
                                                           Foreground="{StaticResource SecondaryTextBrush}" />
                                            </StackPanel>
                                            <CheckBox x:Name="AutoStartCheckBox"
                                                      VerticalAlignment="Center"
                                                      Style="{StaticResource SwitchCheckBoxStyle}"
                                                      Checked="AutoStartCheckBox_Checked"
                                                      Unchecked="AutoStartCheckBox_Unchecked" />
                                        </Grid>

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="220" />
                                            </Grid.ColumnDefinitions>
                                            <StackPanel>
                                                <TextBlock Text="关闭主界面时"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{StaticResource PrimaryTextBrush}" />
                                                <TextBlock Text="点击关闭按钮后的默认行为"
                                                           FontSize="12"
                                                           Margin="0,4,0,0"
                                                           Foreground="{StaticResource SecondaryTextBrush}" />
                                            </StackPanel>
                                            <ComboBox x:Name="CloseBehaviorComboBox"
                                                      Grid.Column="1"
                                                      VerticalAlignment="Center"
                                                      SelectionChanged="CloseBehaviorComboBox_SelectionChanged">
                                                <ComboBoxItem Content="最小化到托盘" IsSelected="True" />
                                                <ComboBoxItem Content="直接退出程序" />
                                            </ComboBox>
                                        </Grid>

                                        <Grid Margin="0,14,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="220" />
                                            </Grid.ColumnDefinitions>
                                            <StackPanel>
                                                <TextBlock Text="提醒弹窗位置"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{StaticResource PrimaryTextBrush}" />
                                                <TextBlock Text="到时提醒窗口显示位置"
                                                           FontSize="12"
                                                           Margin="0,4,0,0"
                                                           Foreground="{StaticResource SecondaryTextBrush}" />
                                            </StackPanel>
                                            <ComboBox x:Name="NotificationPositionComboBox"
                                                      Grid.Column="1"
                                                      VerticalAlignment="Center"
                                                      SelectionChanged="NotificationPositionComboBox_SelectionChanged">
                                                <ComboBoxItem Content="右下角" />
                                                <ComboBoxItem Content="右上角" />
                                                <ComboBoxItem Content="中间" />
                                            </ComboBox>
                                        </Grid>
                                    </StackPanel>
                                </Border>

                                <Border CornerRadius="8"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="1"
                                        Background="White"
                                        Padding="18">
                                    <StackPanel>
                                        <TextBlock Text="数据存储位置"
                                                   FontSize="14"
                                                   FontWeight="SemiBold"
                                                   Foreground="{StaticResource PrimaryTextBrush}" />
                                        <TextBlock Text="当前加载的 JSON 文件路径"
                                                   FontSize="12"
                                                   Margin="0,4,0,10"
                                                   Foreground="{StaticResource SecondaryTextBrush}" />
                                        <TextBox x:Name="DataPathTextBox"
                                                 IsReadOnly="True"
                                                 Background="#F3F4F7"
                                                 Foreground="{StaticResource SecondaryTextBrush}" />
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>
